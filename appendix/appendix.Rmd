---
title: |
       | Supplementary Materials for "Responses to Foreign Shaming over Climate Policy among Nationalist"
author: 
- "Guilherme N. Fasolin[^fasolin]"
- "Umberto Mignozzetti[^mignozzetti]"
- "Matias Spektor[^spektor]"
date: September 19, 2020
fontfamily: libertine
fontawesome: yes
fontsize: 12pt
monospace-url: yes
spacing: double
papersize: a4paper
bibliography: references.bib
biblio-style: apalike
output:
  pdf_document:
    citation_package: natbib
    fig_caption: yes
    number_sections: yes
    toc: true
    keep_tex: no
    template: template.latex
---

\appendix

[^fasolin]: Research Associate, School of International Relations, Fundação Getulio Vargas, Brazil. Contact: <guilherme.fasolin@fgv.br>, <https://github.com/GuilhermeFasolin>.

[^mignozzetti]: Visiting Assistant Professor, Department of Quantitative Theory and Methods, Emory University. Contact: [umberto.mignozzetti@emory.edu](mailto:umberto.mignozzetti@emory.edu), <http://umbertomig.com>.

[^spektor]: Associate Professor, School of International Relations, Fundação Getulio Vargas, Brazil. Contact: <matias.spektor@fgv.br>, <https://www.matiasspektor.com/>.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)

#####
## Initializing
#####

# Start
rm(list=ls())

# R CRAN
r <- getOption("repos")
r["CRAN"] <- "http://cran.us.r-project.org"; options(repos = r)

# Install required packages
pkgs <- c('tidyverse', 'readxl', 'stringr', 
          'lmtest', 'sandwich', 'stargazer',
          'haven', 'survey', 'GDAtools',
          'weights','knitr','broom','gtools',
          'huxtable', 'compareGroups', 'lfe',
          'kableExtra', 'interplot', 'gridExtra',
          'miceadds')

installIfNot <- function(x) {
  if(x %in% rownames(installed.packages()) == FALSE) 
    install.packages(x, dependencies = T)
} 
invisible(lapply(pkgs, installIfNot))

# Load packages
invisible(lapply(pkgs, require, character.only = T))
rm(pkgs, installIfNot, r)

# Load datasets
load('data/environmental.RData')
```

\newpage

\setlength{\parindent}{1cm}
\setlength{\parskip}{0pt}

# Analysis Wave One \label{sec:w1}

## Descriptive Statistics

In the wave 1 dataset (`wave1` R object), we have the following variables:

1. **`nquest`**: 9-digit DataFolha Respondent Code.
2. **`female`**: Dummy for Female Respondent.
3. **`age`**: Age.
4. **`religion`**: 4-brackets religion levels.
5. **`income`**: Income levels.
6. **`hsmore`**: Dummy for High School or more of education.
7. **`outcbin`**: Dummy for support for XXXX.
8. **`trsource`**: Treatment status denoting the source of the criticism.
9. **`trgovresp`**: Treatment status denoting government response to the criticism.
10. **`trstatus`**: Treatment status as appeared in the survey instrument.
11. **`natscale`**: Nationalism scale.
12. **`region`**: Brazilian region.
13. **`wts`**: Weights computed by the DataFolha Statistics Team.
14. **`evang`**: Dummy for Evangelical respondent.
15. **`more5mw`**: More than five minimum wage salaries.

The original Portuguese version of the questionnaire follows in [here](XXXX). We also provide an English translation in [here](XXXX). The descriptive statistics follow below.

```{r}
aux <- wave1 %>%
  dplyr::select(trsource, trgovresp,
                age, female, income, region,
                hsmore, religion, outcbin, 
                natscale) %>%
  rename(`Treatment Source Criticism` = trsource,
         `Treatment Brazilian Response` = trgovresp,
         `Age` = age,
         `Female` = female,
         `Income` = income,
         `Region` = region,
         `High School or more` = hsmore,
         `Religion` = religion,
         `Prop. Supporting XXXX` = outcbin,
         `Nationalism Scale` = natscale)
```

```{r, results='hide'}
export2latex(descrTable(~., digits = 2, show.p.overall = F, show.all = T, data = aux))
```

\begin{longtable}{lcc}\caption{Summary descriptives table}\\
\hline  
&     [ALL]     & \multirow{2}{*}{ N  }\\ 
&    N=2001     &      \\ 
  
    \hline
    \hline     
    \endfirsthead 
    \multicolumn{3}{l}{\tablename\ \thetable{} \textit{-- continued from previous page}}\\ 
    \hline
     &     [ALL]     & \multirow{2}{*}{ N  }\\ 
 &    N=2001     &      \\ 

    \hline
    \hline  
    \endhead   
    \hline
    \multicolumn{3}{l}{\textit{continued on next page}} \\ 
    \endfoot   
    \multicolumn{3}{l}{}  \\ 
    \endlastfoot 
    Treatment Source Criticism: &               & 2001\\ 
$\qquad$Adversary & 997 (49.83\%)  &     \\ 
$\qquad$Ally & 1004 (50.17\%) &     \\ 
Treatment Brazilian Response: &               & 2001\\ 
$\qquad$Abandon Treaties & 490 (24.49\%)  &     \\ 
$\qquad$Recognize Mistakes & 506 (25.29\%)  &     \\ 
$\qquad$Reject Criticism & 503 (25.14\%)  &     \\ 
$\qquad$Remain Silent & 502 (25.09\%)  &     \\ 
Age & 42.96 (16.15) & 2001\\ 
Female: &               & 2001\\ 
$\qquad$No & 951 (47.53\%)  &     \\ 
$\qquad$Yes & 1050 (52.47\%) &     \\ 
Income: &               & 1899\\ 
$\qquad$BRL 0.00 to BRL 998.00 & 397 (20.91\%)  &     \\ 
$\qquad$BRL 999.00 to BRL 1,996.00 & 426 (22.43\%)  &     \\ 
$\qquad$BRL 1,997.00 to BRL 2,994.00 & 380 (20.01\%)  &     \\ 
$\qquad$BRL 2,995.00 to BRL 4,990.00 & 345 (18.17\%)  &     \\ 
$\qquad$BRL 4,991.00 or more & 351 (18.48\%)  &     \\ 
Region: &               & 2001\\ 
$\qquad$Southeast & 853 (42.63\%)  &     \\ 
$\qquad$South & 299 (14.94\%)  &     \\ 
$\qquad$Northeast & 521 (26.04\%)  &     \\ 
$\qquad$Center-West &  163 (8.15\%)  &     \\ 
$\qquad$North &  165 (8.25\%)  &     \\ 
High School or more: &               & 2001\\ 
$\qquad$No & 844 (42.18\%)  &     \\ 
$\qquad$Yes & 1157 (57.82\%) &     \\ 
Religion: &               & 2001\\ 
$\qquad$Catholic & 1015 (50.72\%) &     \\ 
$\qquad$Evangelical Traditional & 274 (13.69\%)  &     \\ 
$\qquad$Evangelical Pentecostal & 370 (18.49\%)  &     \\ 
$\qquad$Others/No Relig. & 342 (17.09\%)  &     \\ 
Prop. Supporting XXXX &  0.54 (0.50)  & 1955\\ 
Nationalism Scale &  0.74 (0.27)  & 1918 \\ 
 
\hline
\end{longtable}

## Treatment Variables

The treatment variables, and how they map each treatment status, is in the Table below.

```{r}
aux <- wave1 %>%
  dplyr::select(trstatus, trsource, trgovresp) %>%
  unique()
row.names(aux) <- aux$trstatus
aux <- aux[names(table(aux$trstatus)),]
row.names(aux) <- NULL
aux %>%
  kable(caption = 'All Treatments', booktabs = T)  %>%
  kable_styling(latex_options = "hold_position")
```

As the table shows, all treatment effects are recoverable in the design by includung the proper iteration effects. This table shows that we have a straightforward factorial design, with two treatment levels.

## Pre-treatment Balance

The pre-treatment variables in the first wave were:

1. Age
2. Gender
3. Education
4. Region
5. Income
6. Religion

We perform two types of balancing tests. For the continuous variables, we perform an F-test. For the categorical variables, we run a Chi-Square test. The results are in the Table \ref{baltestw1}, and are insignificant (p-value above $0.10$). Therefore, we have balance across all treatment levels.

```{r, echo = FALSE}
# Age
mod <- aov(age~trstatus, data=wave1, weights = wave1$wts)
aux <- data.frame(Variable = 'Age',
                  Stat = 'F',
                  Value = round(summary(mod)[[1]][1,4], 3),
                  PValue = round(summary(mod)[[1]][1,5], 3))
# Gender
mod <- wtd.chi.sq(wave1$female, 
                  wave1$trstatus, 
                  weight = wave1$wts)
aux <- rbind(aux, data.frame(Variable = 'Gender',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))
# Education
mod <- wtd.chi.sq(wave1$hsmore, 
                  wave1$trstatus, 
                  weight = wave1$wts)
aux <- rbind(aux, data.frame(Variable = 'Education',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

# Region
mod <- wtd.chi.sq(wave1$region, 
                  wave1$trstatus, 
                  weight = wave1$wts)
aux <- rbind(aux, data.frame(Variable = 'Region',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

# Income
mod <- wtd.chi.sq(wave1$income, 
                  wave1$trstatus, 
                  weight = wave1$wts)
aux <- rbind(aux, data.frame(Variable = 'Income',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

# Religion
mod <- wtd.chi.sq(wave1$religion, 
                  wave1$trstatus, 
                  weight = wave1$wts)
aux <- rbind(aux, data.frame(Variable = 'Religion',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

names(aux) <- c('Variable', 'Statistic', 'Value', 'P-Value')
```

```{r, echo = FALSE}
aux %>%
  kable(caption = 'Balance Tests -- Wave 1\\label{baltestw1}', booktabs = T)
```

## Results in the paper

### Main Model

In the main model, we run a regression XXXX. The results follow in the Table \ref{mainreg}.

```{r, echo = FALSE, results = 'asis'}
mod <- list()
mod[[1]] <- felm(
  outcbin ~ trsource|0|0|region,
  data = wave1, weights = wave1$wts)
mod[[2]] <- felm(
  outcbin ~ trgovresp|0|0|region,
  data = wave1, weights = wave1$wts)
mod[[3]] <- felm(
  outcbin ~ trsource*trgovresp|0|0|region,
  data = wave1, weights = wave1$wts)

stargazer(mod[[1]],mod[[2]],mod[[3]],
          covariate.labels = c('Ally', 
                               'Recognize Mistakes',
                               'Abandon Treaties',
                               'Reject Criticism',
                               'Ally x Recognize Mistakes',
                               'Ally x Abandon Treaties',
                               'Ally x Reject Criticism',
                               'Constant'),
          type = 'latex',
          style = 'apsr',
          title = 'Main Regressions -- Wave 1',
          label = 'mainreg',
          align = T,
          notes = c('Cluster-robust SEs in parenthesis, clustered at the Brazilian region level.', 
                    'Reference category: (1) Adversary criticism; (2) Remain Silent; (3) Silence upon Adversary Criticism.',
                    'Significance levels: $^{*}$p $<$ .1; $^{**}$p $<$ .05; $^{***}$p $<$ .01'),
          notes.append = F,
          column.sep.width = '-2pt',
          digits=3,
          keep.stat="n", 
          header = F,
          dep.var.labels.include=F)
```

### Heterogeneous Effects -- Wave 1

In wave 1, XXXX.

```{r, results = 'hide'}
## Heterogeneous effects
mod <- list()
mod[[1]] <- felm(
  outcbin ~ trsource*natscale|0|0|region,
  data = wave1, weights = wave1$wts)
mod[[2]] <- felm(
  outcbin ~ trgovresp*natscale|0|0|region,
  data = wave1, weights = wave1$wts)
mod[[3]] <- felm(
  outcbin ~ trsource*trgovresp*natscale|0|0|region,
  data = wave1, weights = wave1$wts)

stargazer(mod[[1]],mod[[2]],mod[[3]],
          covariate.labels = c('Ally',
                               'Recognize Mistakes',
                               'Abandon Treaties',
                               'Reject Criticism',
                               'Nat. Scale',
                               'Ally x Recognize Mistakes',
                               'Ally x Abandon Treaties',
                               'Ally x Reject Criticism',
                               'Nat. Scale x Ally',
                               'Nat. Scale x Recognize Mistakes',
                               'Nat. Scale x Abandon Treaties',
                               'Nat. Scale x Reject Criticism',
                               'Nat. Scale x Ally x Recognize Mistakes',
                               'Nat. Scale x Ally x Abandon Treaties',
                               'Nat. Scale x Ally x Reject Criticism',
                               'Constant'),
          type = 'latex',
          style = 'apsr',
          title = 'Nationalism Scale Heterogeneous Effects -- Wave 1',
          label = 'heteffw1',
          align = T,
          notes = c('Cluster-robust SEs in parenthesis, clustered at the Brazilian region level.', 
                    'Reference category: (1) Adversary criticism; (2) Remain Silent; (3) Silence upon Adversary Criticism.',
                    'Significance levels: $^{*}$p $<$ .1; $^{**}$p $<$ .05; $^{***}$p $<$ .01'),
          notes.append = F,
          column.sep.width = '-2pt',
          digits=3,
          keep.stat="n", 
          header = F,
          dep.var.labels.include=F)
```

\begin{table}[!htbp] \centering 
  \caption{Nationalism Scale Heterogeneous Effects -- Wave 1} 
  \label{heteffw1} 
\begin{tabular}{@{\extracolsep{-2pt}}lD{.}{.}{-3} D{.}{.}{-3} D{.}{.}{-3} } 
\\[-1.8ex]\hline \\[-1.8ex] 
\\[-1.8ex] & \multicolumn{1}{c}{(1)} & \multicolumn{1}{c}{(2)} & \multicolumn{1}{c}{(3)}\\ 
\hline \\[-1.8ex] 
 Ally & 0.023 &  & -0.090 \\ 
  & (0.046) &  & (0.097) \\ 
  Recognize Mistakes &  & 0.521^{***} & 0.522^{***} \\ 
  &  & (0.036) & (0.017) \\ 
  Abandon Treaties &  & -0.047 & -0.136^{**} \\ 
  &  & (0.073) & (0.057) \\ 
  Reject Criticism &  & -0.187^{**} & -0.262^{***} \\ 
  &  & (0.085) & (0.062) \\ 
  Nat. Scale & 0.196^{**} & 0.058 & 0.023 \\ 
  & (0.085) & (0.136) & (0.103) \\ 
  Ally x Recognize Mistakes &  &  & 0.011 \\ 
  &  &  & (0.074) \\ 
  Ally x Abandon Treaties &  &  & 0.176 \\ 
  &  &  & (0.250) \\ 
  Ally x Reject Criticism &  &  & 0.157 \\ 
  &  &  & (0.172) \\ 
  Nat. Scale x Ally & -0.036 &  & 0.075 \\ 
  & (0.065) &  & (0.168) \\ 
  Nat. Scale x Recognize Mistakes &  & -0.017 & -0.046^{*} \\ 
  &  & (0.063) & (0.024) \\ 
  Nat. Scale x Abandon Treaties &  & 0.313^{***} & 0.395^{***} \\ 
  &  & (0.106) & (0.078) \\ 
  Nat. Scale x Reject Criticism &  & 0.124 & 0.194^{**} \\ 
  &  & (0.136) & (0.092) \\ 
  Nat. Scale x Ally x Recognize Mistakes &  &  & 0.046 \\ 
  &  &  & (0.128) \\ 
  Nat. Scale x Ally x Abandon Treaties &  &  & -0.160 \\ 
  &  &  & (0.342) \\ 
  Nat. Scale x Ally x Reject Criticism &  &  & -0.148 \\ 
  &  &  & (0.307) \\ 
  Constant & 0.394^{***} & 0.345^{***} & 0.387^{***} \\ 
  & (0.064) & (0.096) & (0.077) \\ 
 N & \multicolumn{1}{c}{1,890} & \multicolumn{1}{c}{1,890} & \multicolumn{1}{c}{1,890} \\ 
\hline \\[-1.8ex] 
\multicolumn{4}{l}{Cluster-robust SEs in parenthesis, clustered at the Brazilian region level.} \\ 
\multicolumn{4}{l}{Reference category: (1) Adversary criticism; (2) Remain Silent; (3) Silence upon Adversary Criticism.} \\ 
\multicolumn{4}{l}{Significance levels: $^{*}$p $<$ .1; $^{**}$p $<$ .05; $^{***}$p $<$ .01} \\ 
\end{tabular} 
\end{table}

To interpret this Table, XXXX.

## Robustness checks

XXXX

### Robustness to addition of controls

We add the following pre-treatment as controls:

1. Age
2. Female
3. Income
4. High School Complete or more
5. Religion

The results remain largely similar to the non-controlled results.

```{r, echo = FALSE, results = 'asis'}
mod <- list()
mod[[1]] <- felm(
  outcbin ~ trsource+female+age+evang+more5mw+hsmore|0|0|region,
  data = wave1, weights = wave1$wts)
mod[[2]] <- felm(
  outcbin ~ trgovresp+female+age+evang+more5mw+hsmore|0|0|region,
  data = wave1, weights = wave1$wts)
mod[[3]] <- felm(
  outcbin ~ trsource*trgovresp+female+age+evang+more5mw+hsmore|0|0|region,
  data = wave1, weights = wave1$wts)

stargazer(mod[[1]],mod[[2]],mod[[3]],
          covariate.labels = c('Ally', 
                               'Recognize Mistakes',
                               'Abandon Treaties',
                               'Reject Criticism',
                               'Ally x Recognize Mistakes',
                               'Ally x Abandon Treaties',
                               'Ally x Reject Criticism',
                               'Constant'),
          type = 'latex',
          style = 'apsr',
          title = 'Main Regressions -- Wave 1',
          label = 'mainreg',
          align = T,
          notes = c('Cluster-robust SEs in parenthesis, clustered at the Brazilian region level.', 
                    'Reference category: (1) Adversary criticism; (2) Remain Silent; (3) Silence upon Adversary Criticism.',
                    'Significance levels: $^{*}$p $<$ .1; $^{**}$p $<$ .05; $^{***}$p $<$ .01',
                    'Controls: female, age, evangelical, more than five min. wage, and high school or more.'),
          notes.append = F,
          omit = c('femaleYes', 'age', 'evangYes', 'more5mwYes', 'hsmoreYes'),
          column.sep.width = '-2pt',
          digits=3,
          keep.stat="n", 
          header = F,
          dep.var.labels.include=F,
          table.placement = 'H')
```

The reference category changed significantly, now reflecting the baseline in each control variable. The treatment variables coefficients remain similar to those in the main and robustness treatment models.

# Analysis Wave Two \label{sec:w2}

## Descriptive Statistics

In the wave 2 dataset (`wave2` R object), we have the following variables:

1. **`nquest`**: 9-digit DataFolha Respondent Code.
2. **`female`**: Dummy for Female Respondent.
3. **`age`**: Age.
4. **`religion`**: 4-brackets respondent's religion.
5. **`income`**: 5-brackets income levels.
6. **`hsmore`**: Dummy for High School or more of education.
7. **`outcbin`**: Dummy for support for Nuclear Proliferation.
8. **`trcontent`**: Treatment status that included a control (no message) versus a liberal message stating the Amazon as a belonging to the humankind.
9. **`trgovresp`**: Treatment status denoting government response to the criticism.
10. **`trstatus`**: Treatment Status.
11. **`natscale`**: Nationalism Scale
12. **`region`**: Brazilian region.
13. **`wts`**: Weights computed by the DataFolha Statistics Team.
14. **`evang`**: Dummy variable for whether the respondent is evangelical or not.
15. **`more5mw`**: More than five minimum wage salaries.

The original Portuguese version of the questionnaire is in [here](XXXX) while the English translated version is in [here](XXXX). The descriptive statistics follow below.

```{r, results = 'hide'}
aux <- wave2 %>%
  dplyr::select(trcontent, trgovresp,
                age, female, income, region,
                hsmore, religion, outcbin, 
                natscale) %>%
  rename(`Treatment Liberal Message` = trcontent,
         `Treatment Brazilian Response` = trgovresp,
         `Age` = age,
         `Female` = female,
         `Income` = income,
         `Region` = region,
         `High School or more` = hsmore,
         `Religion` = religion,
         `Prop. Supporting XXXX` = outcbin,
         `Nationalism Scale` = natscale)
```

```{r, results ='hide'}
export2latex(descrTable(~., digits = 2, show.p.overall = F, 
           show.all = T, data = aux))
```

\begin{longtable}{lcc}\caption{Summary descriptives table}\\
    \hline  
     &     [ALL]     & \multirow{2}{*}{ N  }\\ 
 &    N=2126     &      \\ 
  
    \hline
    \hline     
    \endfirsthead 
    \multicolumn{3}{l}{\tablename\ \thetable{} \textit{-- continued from previous page}}\\ 
    \hline
     &     [ALL]     & \multirow{2}{*}{ N  }\\ 
 &    N=2126     &      \\ 

    \hline
    \hline  
    \endhead   
    \hline
    \multicolumn{3}{l}{\textit{continued on next page}} \\ 
    \endfoot   
    \multicolumn{3}{l}{}  \\ 
    \endlastfoot 
    Treatment Liberal Message: &               & 2126\\ 
$\qquad$Control & 1066 (50.14\%) &     \\ 
$\qquad$Liberal & 1060 (49.86\%) &     \\ 
Treatment Brazilian Response: &               & 2126\\ 
$\qquad$Abandon Treaties & 538 (25.31\%)  &     \\ 
$\qquad$Recognize Mistakes & 526 (24.74\%)  &     \\ 
$\qquad$Reject Criticism & 530 (24.93\%)  &     \\ 
$\qquad$Remain Silent & 532 (25.02\%)  &     \\ 
Age & 42.76 (16.28) & 2126\\ 
Female: &               & 2126\\ 
$\qquad$No & 1011 (47.55\%) &     \\ 
$\qquad$Yes & 1115 (52.45\%) &     \\ 
Income: &               & 2033\\ 
$\qquad$BRL 0.00 to BRL 998.00 & 411 (20.22\%)  &     \\ 
$\qquad$BRL 999.00 to BRL 1,996.00 & 527 (25.92\%)  &     \\ 
$\qquad$BRL 1,997.00 to BRL 2,994.00 & 451 (22.18\%)  &     \\ 
$\qquad$BRL 2,995.00 to BRL 4,990.00 & 353 (17.36\%)  &     \\ 
$\qquad$BRL 4,991.00 or more & 291 (14.31\%)  &     \\ 
Region: &               & 2126\\ 
$\qquad$Southeast & 900 (42.33\%)  &     \\ 
$\qquad$South & 330 (15.52\%)  &     \\ 
$\qquad$Northeast & 546 (25.68\%)  &     \\ 
$\qquad$Center-West &  177 (8.33\%)  &     \\ 
$\qquad$North &  173 (8.14\%)  &     \\ 
High School or more: &               & 2126\\ 
$\qquad$No & 920 (43.27\%)  &     \\ 
$\qquad$Yes & 1206 (56.73\%) &     \\ 
Religion: &               & 2076\\ 
$\qquad$Catholic & 1081 (52.07\%) &     \\ 
$\qquad$Evangelical Traditional & 294 (14.16\%)  &     \\ 
$\qquad$Evangelical Pentecostal & 396 (19.08\%)  &     \\ 
$\qquad$Others/No Relig. & 305 (14.69\%)  &     \\ 
Prop. Supporting XXXX &  0.54 (0.50)  & 2093\\ 
Nationalism Scale &  0.73 (0.27)  & 2032 \\ 
 
    \hline
    \end{longtable}

And the perceived allies statistics in the paper can be found in the table below.

```{r}
round(sort(prop.table(table(wave2$perceivedally))*100), 2) %>%
  kable(caption = 'Perceived Brazilian Ally', booktabs = T)  %>%
  kable_styling(latex_options = "HOLD_position")
```

## Pre-treatment Balance

We perform two types of balancing tests. For the continuous variables, we perform an F-test. For the categorical variables, we run a Chi-Square test. The variables in the pre-treatment balance are:

1. Age
2. Female
3. High school or more
4. Region
5. Income
6. Religion

The results are in the Table below:

```{r, echo = FALSE}
# Age
mod <- aov(age~trstatus, data=wave2, weights = wave2$wts)
aux <- data.frame(Variable = 'Age',
                  Stat = 'F',
                  Value = round(summary(mod)[[1]][1,4], 3),
                  PValue = round(summary(mod)[[1]][1,5], 3))
# Gender
mod <- wtd.chi.sq(wave2$female, 
                  wave2$trstatus, 
                  weight = wave2$wts)
aux <- rbind(aux, data.frame(Variable = 'Gender',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))
# Education
mod <- wtd.chi.sq(wave2$hsmore, 
                  wave2$trstatus, 
                  weight = wave2$wts)
aux <- rbind(aux, data.frame(Variable = 'Education',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

# Region
mod <- wtd.chi.sq(wave2$region, 
                  wave2$trstatus, 
                  weight = wave2$wts)
aux <- rbind(aux, data.frame(Variable = 'Region',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

# Income
mod <- wtd.chi.sq(wave2$income, 
                  wave2$trstatus, 
                  weight = wave2$wts)
aux <- rbind(aux, data.frame(Variable = 'Income',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

# Religion
mod <- wtd.chi.sq(wave2$religion, 
                  wave2$trstatus, 
                  weight = wave2$wts)
aux <- rbind(aux, data.frame(Variable = 'Religion',
                  Stat = 'Chi-Sq',
                  Value = round(as.numeric(mod[1]), 3),
                  PValue = round(as.numeric(mod[3]), 3)))

names(aux) <- c('Variable', 'Statistic', 'Value', 'P-Value')
```

```{r, echo = FALSE}
aux %>%
  kable(caption = 'Balance Tests -- Wave 2\\label{baltestw2}', booktabs = T)
```

As we can see, the results are insignificant (p-value above $0.10$) for all variables but religion. We show in the robustness checks that adding religion as a control variable does not alter our results. Under (p-value $<$ 0.1) we still have a 10\% chance of a spurious correlation between the treatment and one pre-treatment variable. For instance, in six comparison tests under a p-value of 0.1, we have $1-(1-0.1)^6=0.469$, or 46.9\% chance of at least one test be significant at random.

Using Benjamini–Hochberg correction, let $p_k$ the k-th ordered p-value, $m$ the number of tests, and $\alpha$ the significance threshold. We have to adjust the p-values using the following formula:

$$ p_k < \dfrac{k}{m}\alpha $$

When we adjust the p-values for multiple comparisons, no coefficient is significant:

```{r, echo = FALSE}
aux$`Adj. P-Value` = (6/rank(aux$`P-Value`))*aux$`P-Value`
aux$`Adj. P-Value`[aux$`Adj. P-Value`>1] = 1
aux %>%
  kable(caption = 'Balance Tests (with Multiple Comparison\'s Correction) -- Wave 2\\label{baltestmcw2}', booktabs = T)
```

## Main Model -- Wave 2

```{r, echo = FALSE, results = 'asis'}
mod <- list()
mod[[1]] <- felm(
  outcbin ~ trcontent|0|0|region,
  data = wave2, weights = wave2$wts)
mod[[2]] <- felm(
  outcbin ~ trgovresp|0|0|region,
  data = wave2, weights = wave2$wts)
mod[[3]] <- felm(
  outcbin ~ trcontent*trgovresp|0|0|region,
  data = wave2, weights = wave2$wts)

stargazer(mod[[1]],mod[[2]],mod[[3]],
          covariate.labels = c('Liberal Message', 
                               'Recognize Mistakes',
                               'Abandon Treaties',
                               'Reject Criticism',
                               'Liberal Message x Recognize Mistakes',
                               'Liberal Message x Abandon Treaties',
                               'Liberal Message x Reject Criticism',
                               'Constant'),
          type = 'latex',
          style = 'apsr',
          title = 'Main Regressions -- Wave 2',
          label = 'mainregw2',
          align = T,
          notes = c('Cluster-robust SEs in parenthesis, clustered at the Brazilian region level.',
                    'Reference category: (1) No liberal message (control); (2) Remain Silent; (3) Silence upon no liberal message.',
                    'Significance levels: $^{*}$p $<$ .1; $^{**}$p $<$ .05; $^{***}$p $<$ .01'),
          notes.append = F,
          column.sep.width = '-2pt',
          digits=3,
          keep.stat="n", 
          header = F,
          dep.var.labels.include=F)
```


## Heterogeneous effect of Nationalism on the Liberal Message

```{r, results = 'hide'}
## Heterogeneous effects
mod <- list()
mod[[1]] <- felm(
  outcbin ~ trcontent*natscale|0|0|region,
  data = wave2, weights = wave2$wts)
mod[[2]] <- felm(
  outcbin ~ trgovresp*natscale|0|0|region,
  data = wave2, weights = wave2$wts)
mod[[3]] <- felm(
  outcbin ~ trcontent*trgovresp*natscale|0|0|region,
  data = wave2, weights = wave2$wts)

stargazer(mod[[1]],mod[[2]],mod[[3]],
          covariate.labels = c('Liberal Message',
                               'Recognize Mistakes',
                               'Abandon Treaties',
                               'Reject Criticism',
                               'Nat. Scale',
                               'Liberal Message x Recognize Mistakes',
                               'Liberal Message Message x Abandon Treaties',
                               'Liberal Message x Reject Criticism',
                               'Nat. Scale x Liberal Message',
                               'Nat. Scale x Recognize Mistakes',
                               'Nat. Scale x Abandon Treaties',
                               'Nat. Scale x Reject Criticism',
                               'Nat. Scale x Liberal Message x Recognize Mistakes',
                               'Nat. Scale x Liberal Message x Abandon Treaties',
                               'Nat. Scale x Liberal Message x Reject Criticism',
                               'Constant'),
          type = 'text',
          style = 'apsr',
          title = 'Nationalism Heterogeneous Effects -- Wave 2',
          label = 'heteffw2',
          align = T,
          notes = c('Cluster-robust SEs in parenthesis, clustered at the Brazilian region level.',
                    'Reference category: (1) Liberal message; (2) Remain Silent; (3) Silence upon Liberal message.',
                    'Significance levels: $^{*}$p $<$ .1; $^{**}$p $<$ .05; $^{***}$p $<$ .01'),
          notes.append = F,
          column.sep.width = '-2pt',
          digits=3,
          keep.stat="n", 
          header = F,
          dep.var.labels.include=F)
```

## Robustness checks


### Robustness to the addition of controls

We run the main models adding controls for XXXX.

```{r, echo = FALSE, results = 'asis'}
# XXXX
```

# Content in the Main Paper

## XXXX

# APSA Experimental Section Report

## Hypothesis

- What are the questions the experiment was designed to address?
  + In these two-wave survey, we studied the XXXX.

-	What are the specific hypotheses to be tested?
  + We are testing whether respondents in a XXXX.

##	Subjects and Context

-	Eligibility and Exclusion criteria
  + Subjects are selected by a representative sample of the Brazilian population collected by the [DataFolha pooling company](http://datafolha.folha.uol.com.br/). We restrict our sample to people over 18 years old.

- Why was this subject pool selected?
  + The selection was based on a representative sample of the adult Brazilian population.

- Who was eligible to participate in the study?
  + Brazilian citizens, over 18 years old.

- What would result in the exclusion of a participant?
  + Being a foreigner, or younger than 18 years old.

- Were any aspects of recruitment changed after the recruitment began?
  + No.

- Procedures used to recruit and select participants
  + The survey company samples the Brazilian municipalities to match the Brazilian Institute of Geography and Statistics. They put enumerators in places with large influx of people. Enumerators are instructed to gather a diverse pool of responses. Around 30 percent of responses are double-checked to ensure consistency.

- Recruitment dates defining the periods of recruitment and when the experiments were conducted.
  + The first wave of the experiment was fielded between XXXX and XXXX, 2020 The second wave of the experiment was fielded between XXXX and XXXX, 2020. As it is a face-to-face survey experiment, the recruitment is performed at the street level, where the company assigns the enumerator.

- Dates of any repeated
  + Not apply.

- Settings and locations where the data were collected
  + The data was collected using face-to-face data collection, where enumerators are placed in strategic places in the municipalities selected for the survey application. DataFolha performs the municipality selection according to the Brazilian Demographic Census and the population projections issued by the Brazilian Institute of Geography and Statistics.

- Where? Field? Lab? Etc.
  + Face-to-face survey.

- Relevant specifics about the population? College students?
  + The target population is comprised of Brazilian with over 18 years old.

- Survey: Response rate and how it was calculated
  + The first survey wave had `r nrow(wave1)` respondents, and the second wave had a response rate of `r nrow(wave2)`.

## Allocation Methods

- Details of the procedure used to generate the assignment sequence (randomization procedure)
  + We use cluster random assignment, randomizing the vignette of the experiment within each survey quota.
  + There were `r length(table(wave1$trstatus))` treatment arms in the first wave. The answers ranged from `r as.numeric(min(table(wave1$trstatus)))` to `r as.numeric(max(table(wave1$trstatus)))` participants in each treatment status. In the second wave, there were `r length(table(wave2$trstatus))` treatment arms. The answers ranged from `r as.numeric(min(table(wave2$trstatus)))` to `r as.numeric(max(table(wave2$trstatus)))` participants in each treatment status.

- Random assignment
  + Simple random assignment within the Region quota.

- Units of randomization
  + The randomization was performed within Region quota, at the respondent's level.

- Cluster random assignment
  + Region. We use cluster-robust standard error, with Region as the cluster.

- Evidence for random assignment
  + We checked pre-treatment imbalance between control and the treatments in the following variables: Age, Gender, Education, Region, Income, and Religion.

- Pre-treatment variables
  + We have six pre-treatment variables:
    + Age
    + Gender
    + Education
    + Region
    + Income
    + Religion

- Characteristics of the population
  + The population sampled was the entire Brazilian population.

- Block randomization
  + We did not use block randomization.

- Blinding: Were participants unaware of the treatment assignment?
  + Yes. The randomization had an equal chance to draw any of the vignettes for a given respondent. Respondents could not foresee which vignette was drawn, neither that there was more than one vignette as a possible question.

- Were those administering the intervention unaware of the random assignment?
  + No. The enumerators were trained to read each of the vignette questions that showed up on their tablets.

- Checked whether blind was successful?
  + Not apply.

## Treatments

- Descriptions of the intervention:
  + The intervention will consist of XXXX steps.
    + Step 1: XXXX
    + Step 2: XXXX
    + Step 3: Applying the experiment.
    + Step 4: Collecting demographic characteristics.

- Describe the treatment and control groups
  + In the first wave, we had:
    + Treatment 1: `r names(table(wave1$trstatus))[1]`
    + Treatment 2: `r names(table(wave1$trstatus))[2]`
    + Treatment 3: `r names(table(wave1$trstatus))[3]`
    + Treatment 4: `r names(table(wave1$trstatus))[4]`
    + Treatment 5: `r names(table(wave1$trstatus))[5]`
    + Treatment 6: `r names(table(wave1$trstatus))[6]`
    + Treatment 7: `r names(table(wave1$trstatus))[7]`
    + Treatment 8: `r names(table(wave1$trstatus))[8]`
  + In the second wave, we had:
    + Treatment 1: `r names(table(wave2$trstatus))[1]`
    + Treatment 2: `r names(table(wave2$trstatus))[2]`
    + Treatment 3: `r names(table(wave2$trstatus))[3]`
    + Treatment 4: `r names(table(wave2$trstatus))[4]`
    + Treatment 5: `r names(table(wave2$trstatus))[5]`
    + Treatment 6: `r names(table(wave2$trstatus))[6]`
    + Treatment 7: `r names(table(wave2$trstatus))[7]`
    + Treatment 8: `r names(table(wave2$trstatus))[8]`

- Experimental instructions
  + To introduce the experimental question, the enumerator reads the following instructions: _XXXX_. Then the enumerator asks the questions.

- How and when manipulations were administered
  + The manipulation will be applied after the measurement of step one and step two covariates (see above) but before the measurement of the demographic variables.

- Method of delivery
  + The delivery was made by the enumerator reading the randomly selected vignette to the respondent.

- Software used to administer the treatment
  + DataFolha uses the SurveyToGo software on their tablets. Respondents will also be handed cards with the description of the answer ranges.

## Results

### Outcome measures and covariates

- Outcome measures
  + The outcome measured in both waves is the level of support for nuclear proliferation in Brazil.

- Covariates
  + **Heterogeneous Effects**: We use the variable `natscale`, a Nationalism Scale, for heterogeneous effects.
  + **Pre-treatment Covariates**: We use the variables `age`, `income`, `schooling`, `education` and `religion` as pre-treatment covariates. Religion is absent from wave two as it was a variable that is sold separately from the other demographic characteristics.

- Survey Questionnaires
  + First Wave: [Original Brazilian Portuguese](XXXX) version and [English translation](XXXX).
  + Second Wave: [Original Brazilian Portuguese](XXXX) version and [English translation](XXXX).

- Which outcomes and subgroup analysis were specified prior to the experiment?
  + In the paper, we used a conservation scale as heterogeneous effects. The heterogeneous effects were pre-specified in the Pre-Analysis Plan before the analysis. The conservation scale consists of the following questions:
    + _Here I will read a few sentences, and I would like you to tell me if you think this person described agrees with the way you see the world, totally or in part._
    + XXXX

- Exploratory analysis? What find?
  + We conducted a focus group with FGV-IR students to ensure that the survey content was intelligible. After the focus group, we rephrased a few students' perceived questions as hard, accepting suggestions on phrasing and content.
  + We have not processed the students' responses, as the focus group was more conversational, not for quantitative measurement.

### CONSORT

1. Number of subjects initially accessed for eligibility:
  + In both waves, the survey company promised a sample of 2000 respondents. They give a sample of `r nrow(wave1)` and `r nrow(wave1)` in waves 1 and 2, respectively.

2. Exclusions prior to random assignment
  + There were no exclusions.

3. Subjects initially assigned to each experimental group
  + In the first wave:
    + Treatment 1 (`r names(table(wave1$trstatus))[1]`): `r as.numeric(table(wave1$trstatus)[1])` respondents.
    + Treatment 2 (`r names(table(wave1$trstatus))[2]`): `r as.numeric(table(wave1$trstatus)[2])` respondents.
    + Treatment 3 (`r names(table(wave1$trstatus))[3]`): `r as.numeric(table(wave1$trstatus)[3])` respondents.
    + Treatment 4 (`r names(table(wave1$trstatus))[4]`): `r as.numeric(table(wave1$trstatus)[4])` respondents.
    + Treatment 5 (`r names(table(wave1$trstatus))[5]`): `r as.numeric(table(wave1$trstatus)[5])` respondents.
    + Treatment 6 (`r names(table(wave1$trstatus))[6]`): `r as.numeric(table(wave1$trstatus)[6])` respondents.
    + Treatment 7 (`r names(table(wave1$trstatus))[7]`): `r as.numeric(table(wave1$trstatus)[7])` respondents.
    + Treatment 8 (`r names(table(wave1$trstatus))[8]`): `r as.numeric(table(wave1$trstatus)[8])` respondents.
  + In the second wave:
    + Treatment 1 (`r names(table(wave2$trstatus))[1]`): `r as.numeric(table(wave2$trstatus)[1])` respondents.
    + Treatment 2 (`r names(table(wave2$trstatus))[2]`): `r as.numeric(table(wave2$trstatus)[2])` respondents.
    + Treatment 3 (`r names(table(wave2$trstatus))[3]`): `r as.numeric(table(wave2$trstatus)[3])` respondents.
    + Treatment 4 (`r names(table(wave2$trstatus))[4]`): `r as.numeric(table(wave2$trstatus)[4])` respondents.
    + Treatment 5 (`r names(table(wave2$trstatus))[5]`): `r as.numeric(table(wave2$trstatus)[5])` respondents.
    + Treatment 6 (`r names(table(wave2$trstatus))[6]`): `r as.numeric(table(wave2$trstatus)[6])` respondents.
    + Treatment 7 (`r names(table(wave2$trstatus))[7]`): `r as.numeric(table(wave2$trstatus)[7])` respondents.
    + Treatment 8 (`r names(table(wave2$trstatus))[8]`): `r as.numeric(table(wave2$trstatus)[8])` respondents.

4. Proportion received x not received intervention:
  + In the first wave:
    + Treatment 1 (`r names(table(wave1$trstatus))[1]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[1]*100,2)` percent.
    + Treatment 2 (`r names(table(wave1$trstatus))[2]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[2]*100,2)` percent.
    + Treatment 3 (`r names(table(wave1$trstatus))[3]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[3]*100,2)` percent.
    + Treatment 4 (`r names(table(wave1$trstatus))[4]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[4]*100,2)` percent.
    + Treatment 5 (`r names(table(wave1$trstatus))[5]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[5]*100,2)` percent.
    + Treatment 6 (`r names(table(wave1$trstatus))[6]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[6]*100,2)` percent.
    + Treatment 7 (`r names(table(wave1$trstatus))[7]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[7]*100,2)` percent.
    + Treatment 8 (`r names(table(wave1$trstatus))[8]`): `r round(as.numeric(prop.table(table(wave1$trstatus)))[8]*100,2)` percent.
  + In the second wave:
    + Treatment 1 (`r names(table(wave2$trstatus))[1]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[1]*100,2)` percent.
    + Treatment 2 (`r names(table(wave2$trstatus))[2]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[2]*100,2)` percent.
    + Treatment 3 (`r names(table(wave2$trstatus))[3]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[3]*100,2)` percent.
    + Treatment 4 (`r names(table(wave2$trstatus))[4]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[4]*100,2)` percent.
    + Treatment 5 (`r names(table(wave2$trstatus))[5]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[5]*100,2)` percent.
    + Treatment 6 (`r names(table(wave2$trstatus))[6]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[6]*100,2)` percent.
    + Treatment 7 (`r names(table(wave2$trstatus))[7]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[7]*100,2)` percent.
    + Treatment 8 (`r names(table(wave2$trstatus))[8]`): `r round(as.numeric(prop.table(table(wave2$trstatus)))[8]*100,2)` percent.

5. Why did not receive intervention?
  + Only by random assignment to the control group.

6. Number subjects each group dropped experiment
  + No respondent was dropped.

7. Number included and any reason for exclusion
  + Not apply.

### Statistical analysis

- Describe statistical analysis
  + Linear regression analysis (OLS) with cluster-robust standard errors. We used the function `felm` from the package `lfe` in R. The package provides a straightforward way to estimate cluster-robust standard errors.

- Means and standard deviations
  + For the first wave:

```{r}
wave1 %>% 
  group_by(trstatus) %>%
  summarise(`Mean Support` = round(mean(outcbin, na.rm=T), 3),
            `SD Suppor` = round(sd(outcbin, na.rm=T), 3),
            `SE Support` = round(sd(outcbin, na.rm=T)/sqrt(n()), 3)) %>%
  data.frame() %>%
  kable(caption = 'Wave 1 -- Means and Std. Deviations', booktabs = T)  %>%
  kable_styling(latex_options = "hold_position")
```

  + For the second wave:

```{r}
wave2 %>% 
  group_by(trstatus) %>%
  summarise(`Mean Support` = round(mean(outcbin, na.rm=T), 3),
            `SD Support` = round(sd(outcbin, na.rm=T), 3),
            `SE Support` = round(sd(outcbin, na.rm=T)/sqrt(n()), 3)) %>%
  data.frame() %>%
  kable(caption = 'Wave 2 -- Means and Std. Deviations', booktabs = T)  %>%
  kable_styling(latex_options = "hold_position")
```

- ITT
  + Not apply

- If use block randomization, ITT by block or overall means using IPW
  + Not apply.

- Standard errors:
  + Cluster-robust standard errors, clustering at the Region level.

- Attrition:
  + Not apply.

- Analyze pre-treatment variables to check reasons
  + See the pre-treatment balance section.

- Missing data
  + There no missing data in the treatment assignments. Most of the missing is generated by the `Don't know` answer in the primary outcomes. This was a voluntary answer that affected `r sum(is.na(wave1$outcbin))` out of `r nrow(wave1)` responses in the first wave, and `r sum(is.na(wave2$outcbin))` out of `r nrow(wave2)` responses in the second wave.

- Frequency and percentage missing by group
  + See the descriptive statistics section for each of the waves.

- Method for addressing missing data
  + Not apply.

- Summary missing data by subgroup
  + For the first wave:
  
```{r}
tab <- table(wave1$trstatus, is.na(wave1$outcbin))
colnames(tab) <- c('Valid', 'Missing')
tab
```

  + For the second wave:
  
```{r}
tab <- table(wave2$trstatus, is.na(wave2$outcbin))
colnames(tab) <- c('Valid','Missing')
tab
```

- Survey experiments:
  + A histogram of the weights for the first wave follows below.
  
```{r, fig.pos='h'}
hist(wave1$wts, main = 'Weights Wave 1')
```
  
  + A histogram of the weights for the second wave follows below.

```{r, fig.pos='h'}
hist(wave2$wts, main = 'Weights Wave 2')
```

- Reweighing procedures
  - We only use the weights assigned by the DataFolha company. The weights assigned by DataFolha have the purpose of guarantee the representativeness of the Brazilian population. Heloisa Furia supervised the weight computations.

## Other information

- IRB
  + We received IRB from the FGV Human Subjects Research Committee. IRB Number: XXXX/2019.

- Pre-registered? Where?
  + This experiment has not being pre-registered.

- Funding? Role of funders in the experiment?
  + The research has been funded by MacArthur Foundation and by Stanton Foundation. No funder interfered neither in the design nor in the implementation of this experiment.

- Replication dataset? URL?
  + The replication data is in the following GitHub repository: [https://github.com/umbertomig/environmental-politics-survey](https://github.com/umbertomig/environmental-politics-survey).

## Session Information

We use `r R.version.string` to write this appendix. For the regression models estimation, we use the package `lfe`. Everything in this report is fully automated and can be reproduced using R Markdown.

```{r}
sessionInfo()
```